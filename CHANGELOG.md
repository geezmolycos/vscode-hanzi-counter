# Change Log

All notable changes to the "vscode-hanzi-counter" extension will be documented in this file.

## TODO

- twitter character count
- 日本语较准确的「原稿用紙換算」
- 发布到open vsx上

## [1.6.2] - 2023-10-05

- 不统计过大的文件(>3M字符)或二进制文件，因为会占用过多CPU时间，使extension host假死 (#6)

## [1.6.1] - 2023-08-18

- 修复了西文句数包含空行的问题 (#5)

## [1.6.0] - 2023-08-03

- 给默认状态栏模板中的 `tableRow` 函数添加了可选 `small` 参数，方便将文字变小，节省横向空间。
- 在所有「单词」的正则表达式规则中，排除了类似汉字的文字，因为汉字统计词数规则不同，和西文混合统计不合理 (#3)
- 默认禁用了一些我认为多余的统计条目，让其更简洁
- 将西文页面的「单词」换成分段器的单词，禁用空格分隔的单词，因为这样效果较好
- 将中文页面的「单词数」换成「字词数」，并移动到首位，其计算方式为 CJK 字符（含标点）和西文单词数的和
- 将中文页面的「中文」改为「汉字」
- 默认禁用 UTF-8 详细信息显示，因为对很多人用处不大

## [1.5.2] - 2023-05-08

- 在工具提示里面添加了虚拟的链接，供 VS Code 检测，以使鼠标离开工具提示时不消失 (fix #2)
- 设置了状态栏项目的 `accessibilityInformation` 属性，方便屏幕阅读器阅读

## [1.5.1] - 2023-03-29

- CJK 字符现在使用了分段器

## [1.5.0] - 2023-03-29

- 加入新的正则名字修饰符，表示预先将文本规范化为 Unicode 标准化形式
  - 支持四种规范化形式(nfd/nfc/nfkd/nfkc)，支持高亮
- 谚文匹配规则利用了修饰符，更加简洁
- 更改了模糊的「非空白字符」「非ASCII字符」等，加入码位数，以澄清字符和码位的区别
- 重新排列了各语言的项目顺序，更符合直觉
  - 更新了utf-8项目，版面更加整齐
- 给设置项添加了中文描述
- 设置教程中加入了添加删除项目的教程
- 修改颜色，提供视觉线索
  - 白：主要
  - 红：片假名
  - 橙：平假名
  - 黄：汉字
  - 绿：谚文
  - 蓝：标点
  - 紫：符号

## [1.4.2] - 2023-03-17

- 更新了 `package.json` ，使得扩展可在 VS Code for the Web 中运行

## [1.4.1] - 2023-03-17

- 删除不再使用的 command contribution
- 1.4.0 版本存在下载问题，修复不能直接安装 (fix #1)

## [1.4.0] - 2023-03-11

- 增加了配置教程
- 取消介绍页面，增加 tooltip「设为默认」命令，在模板环境可以获取默认。刚开始会让用户选语言
- README.md 中增加英文
- 更改了各语言的标点符号匹配规则，现在只匹配对应语言文字中的标点符号

## [1.3.3] - 2023-03-10

- 之前打包了多余文件，造成文件变大，现在删除这些多余文件

## [1.3.2] - 2023-03-10

- 将汉字和 CJK 字符包括 Letter_Number 类，使得「〇」和苏州码子也包括在汉字内
- 更改非空白字符规则，添加 Segmenter
- 增加了该扩展和其他工具的正确性对比文档
- 增加了性能对比文档
- 修改了 `README.md` 更直白，易于理解

## [1.3.1] - 2023-03-08

- 使用 Segmenter 的正则表达式也可以正常高亮了
  - 若该正则匹配 segment 标记字符，则会高亮整个 segment
  - 受算法性能限制，限制最大文本长度到 200000 (UTF-16，使用 substring 方法)，极罕见的情况下可能会产生半个surrogate pair
- 数字默认使用逗号分隔，更加清晰

## [1.3.0] - 2023-03-08

- 为正则表达式加入匹配 Grapheme cluster / word / sentence 的选项
  - 使用正则表达式的命名表示需要不需要开启分词器
  - 使用 U+fdd0 和 U+fdd1 表示非单词边界和单词边界
- 更改默认字符数为 grapheme cluster 数，另外提供 codepoint 数

## [1.2.0] - 2023-02-25

- 加入日语、(朝鲜语/韩语)匹配规则
- 加入更多自带的匹配规则，涵盖 unicode 各 General Category，以便使用
- 加入tooltip分页，功能概览页显示设置链接，快速进入设置
  - 功能概览提供简要的说明和快速教程
- 加入日语韩语简介
- 现在找不到模板或者模板代码出错，会弹出错误提示
- 更改高亮的风格，改成粗的下划线

## [1.1.0] - 2023-02-24

- 加入高亮指定正则匹配的指令，可以在模板中加入指令，点击以后在文件中高亮此项的匹配
  - 为了性能考虑，一次最多能高亮20000个区间，如果超过了20000个，再安排20000个到可视区间里
  - 可以一次高亮多种类型的文字，会使用多种颜色区分这些文字。例如可以把中文和中文标点分开高亮
- 给模板代码加入环境this，可以用来记录变量。比如预先生成的查找表就可以缓存到this中。

## [1.0.0] - 2023-02-13

- 为每个打开的文档建立一个DocumentCounter的实例，按行缓存各正则表达式统计的字数，提高性能
  - 只在文件打开、保存时统计全文字数
  - 修改时只统计修改部分的字数，并更新全文字数
  - 在编辑字数很多的文件时，性能有显著提升
- 修复了建立多个选区时字数统计只考虑第一个选区的问题
- 增加启用禁用设置项，可以指定仅某语言下启用
  - 例如可以仅在编辑markdown时显示统计字数
- tooltip的模板可以添加任意个，使用指令链接切换
  - 例如分别设置中文统计、日文统计、英文统计的tooltip模板，显示对应的内容
- 分离了源码文件，更改了vscode导入方式，更加方便维护
- MIT License

## [0.1.1] - 2023-02-09

- 缩减中文标点符号范围，缩减到Script_extensions为Han或Common，且分类为P、S、N的字符
- 增加启用禁用、调节状态栏显示的设置

## [0.1.0] - 2023-02-05

- 在状态栏上显示文档字数，tooltip 中显示详细信息，点击展开显示更详细信息
- 在设置中添加要统计字数的各类项目对应的正则表达式
- 在设置中通过 JavaScript 函数自定义要显示的内容
- 默认设置添加统计项目：
  - 单词数
  - 总字符数
  - 非 ASCII 字符数
  - 中文字数（含标点和不含标点）
  - UTF-8 大小
